job:
  device: cuda
  type: search

model: transe

dataset:
  name: toy

train:
  batch_size: 256
  loss: margin_ranking
  loss_arg: 4.0
  max_epochs: 200
  optimizer: Adagrad
  optimizer_args:
    lr: 0.1
  type: negative_sampling

negative_sampling:
  filter_negatives: false
  num_negatives_o: 3
  num_negatives_p: 0
  num_negatives_s: 3
  sampling_type: uniform

valid:
  early_stopping.patience: 5
  every: 5
  filter_with_test: True
  metric: mean_reciprocal_rank_filtered_with_test

eval:
  batch_size: 512

transe:
  class_name: TransE
  entity_embedder:
    dim: 100
    initialize: uniform_
    sparse: true
    type: lookup_embedder
    regularize: l2
    regularize_weight: 1.e-05
  relation_embedder:
    dim: 100
    initialize: uniform_
    sparse: true
    type: lookup_embedder
    regularize: l2
    regularize_weight: 1.e-05
  l_norm: 1.


ax_search:
  num_trials: 50
  parameters:
    - name: train.optimizer
      type: fixed
      value: Adagrad
    - name: train.optimizer_args.lr
      type: range
      bounds: [0.001, 1.0]
    - name: train.loss_arg
      type: range
      bounds: [0.0001, 10.0]
    - name: transe.entity_embedder.normalize.p
      type: choice
      values: [-1., 2.]
      is_numerical: False
      is_ordered: False
    - name: transe.relation_embedder.normalize.p
      type: choice
      values: [-1., 2.]
      is_numerical: False
      is_ordered: False
    - name: lookup_embedder.regularize_weight
      type: range
      bounds: [0.0, 0.001]

search.num_workers: 4
train.num_workers: 4
eval.num_workers: 4
